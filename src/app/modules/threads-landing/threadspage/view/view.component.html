<div *ngIf="loading" class="profile-loader"><img src="assets/images/loading.svg" alt="Loader" /></div>
<div *ngIf="!loading">
    <div class="th-error-div" *ngIf="threadViewError"><div class="error-msg">{{threadViewErrorMsg}}</div></div> 
    <div  *ngIf="!threadViewError">
    <div id="header" class="detail-page-header">
        <app-product-header class="hide" [pageData]="headerData"></app-product-header>
        <app-thread-detail-header [pageData]="headerData" (threadHeaderActionEmit)="threadHeaderAction($event)"></app-thread-detail-header>    
    </div>  
    
    <div class="thread-detail-section">
        <div *ngIf="!teamSystem" class="th-outer-col th-outer-col-1"></div>
        
        <div class="th-outer-col th-outer-col-2" [ngClass]="{'col-expand': rightPanel, 'col-collapse': !rightPanel, 'th-outer-col-2-ms': teamSystem}">
            <div [style.height]="'calc(100vh - 95px)'">
                <div #top id="step" class="ps thread-post" (scroll)="scrolled($event)" [perfectScrollbar]="sconfig" >  

                    <button style="visibility: hidden;" #print printTitle="Thread View" printSectionId="mytodosItemsId" ngxPrint styleSheetFile="assets/print.css" >Print</button> 
                    <div id="mytodosItemsId" #tdpage class="thread-detail-page">                        
                        
                        <app-thread-detail-view (activePosition)="setActivePosition($event)" ></app-thread-detail-view>                                                            
                       
                        <div class="post-div" *ngIf="threadRemindersData!=''">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view">
                                      <div class="reminder-view mTopm">
                                          <div class="reminder-row" *ngFor="let trdata of threadRemindersData;" >
                                              <p *ngIf="trdata.title != ''" class="reminder-title">{{trdata.title}}</p>
                                              <div class="reminder-date"><img src="assets/images/thread-detail/thread-view-reminder.png"> <span>Reminder sent on {{trdata.createdOn}}</span></div>                                                                                               
                                          </div>
                                      </div>                             
                                </div>                                                 
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>

                        <div class="post-div" *ngFor="let post of postData; let i = index;">                            
                            <div *ngIf="post.postLoading" class="thread-post-loader"><img src="assets/images/loading.svg" alt="Loader" /></div>
                            <div class="post-div-col post-div-left" [ngClass]="{ 'setOpacity3' : post.postLoading }">                                
                                <div *ngIf="post.postView" class="post-view pid-{{post.postId}}">                                
                                    <div class="post-row display-table">
                                        <div class="display-tablecell post-col post-col1"><div class="post-profile-img"><span (click)="taponprofileclick(post.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + post.profileImage + ')'}"></span><span class="availability-status availability-status{{post.availability}}"></span></div></div>
                                        <div class="display-tablecell post-col post-col2">
                                            <div class="post-head display-table">
                                                <div class="display-tablecell post-head-col post-head-col1">  
                                                    <div class="post-head-inner-col">
                                                        <div class="post-head-inner-col1">
                                                            <div class="name-text">
                                                                <span class="cursor-pointer" (click)="taponprofileclick(post.userId)">
                                                                    <span class="profile-topbadge-user-pview1" *ngIf="post.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{post.userName}}
                                                                </span>
                                                                <span class="title-text truncate" [ngClass]="{'more': !post.threadOwnerLabel}" title="{{post.userRoleTitle}}">{{post.userRoleTitle}}</span>
                                                                <span *ngIf="post.threadOwnerLabel" class="thread-owner-label"></span>
                                                            </div>
                                                            <div class="posted-text">{{post.postedFrom}}</div>
                                                        </div>
                                                        <div class="post-head-inner-col2 hide" *ngIf="post.threadOwnerLabel">                                                        
                                                            <div class="thread-owner-label"></div>                                                       
                                                        </div>
                                                    </div>                                    
                                                </div>
                                                
                                                <div class="display-tablecell post-head-col post-head-col2">
                                                    <span class="th-date-text post-date-text">{{post.postCreatedOn}}</span>  
                                                    <span *ngIf="post.editDeleteAction" (click)="editPostAction(post.postId)"><img class="post-edit-img cursor-pointer" src="assets/images/thread-detail/post-edit.png" /></span>
                                                    <span *ngIf="post.editDeleteAction" (click)="postDeleteConfirm(post.postId)"><img class="post-delete-img cursor-pointer" src="assets/images/thread-detail/post-delete.png" /></span>   
                                                    </div>
                                            </div>
                                            <div class="post-cont">
                                                <p class="post-desp" [innerHTML]="post.contentWeb"></p>
                                               
                                                <!-- Attachment List-->
                                                <app-attachment-view *ngIf="!post.attachmentLoading" [loading]="post.attachmentLoading" [action]="post.action" [dynamicGid]="post.postId" [access]="pageAccess"  [attachments]="post.attachments"></app-attachment-view>
                                                <!-- Attachment List-->

                                                <div class="table-row4 cursor-pointer" (click)="threadDashboarUserList('thread-dashboard','like',post.threadId,post.postId,'0'); $event.stopPropagation();"> 
                                                    <div class="display-table row4" >
                                                        <div class="display-tablecell row4-col1">
                                                            <div class="icons-div">
                                                                <span title="Like" class="icon icon-like setOpacity5" *ngIf="post.actionDisable" [ngStyle]="{'background-image': 'url('+post.likeImg+')'}"></span>
                                                                <span title="Like" class="icon icon-like cursor-pointer" *ngIf="!post.actionDisable" (click)="socialAction('like', post.likeStatus, post.postId); $event.stopPropagation();" [ngStyle]="{'background-image': 'url('+post.likeImg+')'}"></span>
                                                                <span class="icon-count-text">{{post.likeCountVal}}</span>
                                                            </div>                                                      
                                                        </div>                                                        
                                                        <div class="display-tablecell row4-col2 ">
                                                            <div *ngIf="!msTeamAccessMobile" class="icons-div icon-left">
                                                                <span title="Share" class="icon icon-thread-share"></span>                                
                                                            </div>                                                            
                                                            <div *ngIf="!msTeamAccessMobile" class="icons-div icon-left">
                                                                <span title="Flag" class="icon icon-thread-flag"></span>                                
                                                            </div>
                                                            <div class="icons-div icon-left" *ngIf="post.postType != '' && (post.postType == 'Fix' || post.postType == 'fix')">
                                                                <span class="proposed-bulb-border" *ngIf="(post.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{post.postStatus}} " tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="changeTooltip(post.postId);$event.stopPropagation();"></span></span>
                                                                <span *ngIf="(post.postStatus != '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{post.postStatus}} " tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="$event.stopPropagation();"></span></span>
                                                                <span *ngIf="((closeStatus == 1) || ((userId != threadUserId && !specialOwnerAccess && userId != post.userId) || (userId != threadUserId && !specialOwnerAccess && userId == post.userId) || ((this.userId == this.threadUserId || specialOwnerAccess) && userId == post.userId)))" title="Post Status" class="icon icon-thread-bstatus{{post.postStatus}}" ></span>  
                                                                <div class="manual-tt-outer" *ngIf="post.postStFlag && (post.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)">
                                                                    <div class="manual-tt">
                                                                        <div class="arrow-up"></div>
                                                                        <div class="innerDiv">
                                                                            <span>Tap bulb to change fix status</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>                                                            
                                                            <ng-template #solutionFixStatus>
                                                                <div *ngIf="threadOwner" class="thread-owner-reply">   
                                                                    <div class="display-table label-tt-cont" (click)="setSolutionStatus('1',post.postId, post.postStatus); $event.stopPropagation();"  >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Fixed the Problem</span>
                                                                    </div>
                                                                    <div class="display-table label-tt-cont" (click)="setSolutionStatus('2',post.postId, post.postStatus); $event.stopPropagation();" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Helpful/Possible Fix</span>
                                                                    </div>
                                                                    <div class="display-table label-tt-cont" (click)="setSolutionStatus('3',post.postId, post.postStatus); $event.stopPropagation();" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/did-not-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Did not fix the problem</span>
                                                                    </div>
                                                                </div>                                                                
                                                            </ng-template>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            <div *ngIf="post.remindersData!=''">
                                                <div class="reminder-view mTop">
                                                    <div class="reminder-row" *ngFor="let prdata of post.remindersData;" >
                                                        <p *ngIf="prdata.title != ''" class="reminder-title">{{prdata.title}}</p>
                                                        <div class="reminder-date"><img src="assets/images/thread-detail/thread-view-reminder.png"> <span>Reminder sent on {{prdata.createdOn}}</span></div>                                                                                               
                                                    </div>
                                                </div> 
                                            </div>                                            
                                        </div>
                                    </div>
                                </div> 
                                <div *ngIf="!post.postView" class="post-edit" > 
                                    <div class="post-view"></div>  
                                    <div class="post-new remove-radius">
                                        
                                            <div class="thread-head post-head display-table">
                                                <div class="display-tablecell thread-head-col1 post-head-col1">
                                                    <div class="display-table">
                                                        <div class="display-tablecell">
                                                            <div class="th-head-img"><span (click)="taponprofileclick(post.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + post.profileImage + ')'}"></span><span class="availability-status availability-status{{post.availability}}"></span></div>                            
                                                        </div>
                                                        <div class="display-tablecell">
                                                            <span class="th-head-text1 cursor-pointer" (click)="taponprofileclick(post.userId)"><span class="profile-topbadge-user-pview2" *ngIf="post.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{post.userName}}</span>
                                                            <span class="th-head-text2 new-head-text2">{{post.userRoleTitle}}</span>                                                    
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="display-tablecell post-head-col2">
                                                    <div class="post-button post-button-white cursor-pointer" (click)="cancelPostAction(post.postId)">
                                                        <span class="post-btn-text cancel-btn-text cursor-pointer">Cancel</span>
                                                        <img class="post-btn-img cancel-btn-img cursor-pointer" src="assets/images/parts/cancel-icon.png" >
                                                    </div> 
                                                    <div *ngIf="!postSaveButtonEnable" class="post-button post-button-red setOpacity3">
                                                        <span class="post-btn-text">Save</span>
                                                        <img class="post-btn-img" src="assets/images/profile/profile-save.png">
                                                    </div>
                                                    <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && !msTeamAccessMobile" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSaveContent">
                                                        <span class="post-btn-text cursor-pointer">Save</span>
                                                        <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                    </div>                                                    
                                                    <div *ngIf="postSaveButtonEnable && techSubmmitFlag" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')">
                                                        <span class="post-btn-text cursor-pointer">Save</span>
                                                        <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                    </div>
                                                    <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && msTeamAccessMobile cursor-pointer" class="post-button post-button-red" tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSaveContent">
                                                        <span class="post-btn-text cursor-pointer">Save</span>
                                                        <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                    </div>
                                                    <ng-template #postSaveContent>
                                                        <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                            <label class="label-tt-head">Select your Post type</label>
                                                            <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')"  >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-comment.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply or Comment</span>
                                                            </div>
                                                            <div *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'edit')" >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                            </div> 
                                                            <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',post.postId,'edit')"  >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                            </div>
                                                            <div class="display-table label-tt-cont cursor-pointer " (click)="setPostType('Fix', '2',post.postId,'edit')" >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                            <label class="label-tt-head">Are you posting a Comment or a Proposed Fix?</label>
                                                            <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')" >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-comment.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                            </div>
                                                            <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'edit')" >
                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                            </div>                                                   
                                                        </div>
                                                    </ng-template>
                                                </div>                                        
                                            </div>
                                            <div class="post-new-cont">                                                
                                                <!--<div class="post-error-msg" *ngIf="submitted1 && f1.postEditDesc.errors">Enter Reply</div>-->
                                                <div class="post-desp-div">
                                                    <!--<textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postEditDesc" [ngModel]="postEditDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'edit')"></textarea>-->
                                                    <p-editor [(ngModel)]="postEditDesc" (onTextChange)="changePostDesc($event,'edit')" [style]="{'height': '180px'}">
                                                        <p-header>
                                                            <span class="ql-formats">
                                                                <button class="ql-bold" aria-label="Bold"></button>
                                                                <button class="ql-italic" aria-label="Italic"></button>
                                                                <button class="ql-underline" aria-label="Underline"></button>
                                                            
                                                                <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                                <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                                </select>
                                                                <button class="ql-list" value="ordered"></button>
                                                                <button class="ql-list" value="bullet"></button>
                                                                <select title="Text Alignment" class="ql-align" >
                                                                    <option selected>Gauche</option>
                                                                    <option value="center" label="Center"></option>
                                                                    <option value="right" label="Right"></option>
                                                                    <option value="justify" label="Justify"></option>
                                                                </select>            
                                                            
                                                                <!--<button aria-label="Link" class="ql-link"></button>-->
                                                                <!--button aria-label="Image" class="ql-image"></button-->
                                                            </span>
                                                        </p-header>
                                                    </p-editor>
                                                </div>
                                                <div class="attachment-row">
                                                    <div class="post-error-msg post-link-error" *ngIf="posteditServerError">{{postEditServerErrorMsg}}</div>
                                                    <app-file-attachment *ngIf="editPostUpload" class="attachment-file" [action]="manageAction" [apiData]="postEditApiData" [attachmentItems]="post.attachmentItems" [postData]="post" (uploadedItems)="editAttachments($event)"></app-file-attachment>
                                                    <app-attachment-view *ngIf="post.attachments.length > 0" [action]="post.EditAttachmentAction" [access]="pageAccess" [attachments]="post.attachmentItems" (attachmentAction)="attachmentAction($event)"></app-attachment-view>
                                                </div>
                                            </div>  
                                       
                                    </div>
                                </div>                                                        
                            </div>
                            <div class="post-div-col post-div-right thread-detail-scroll-to scrollbar scrollbar-primary thin" [ngClass]="{ 'setOpacity3' : post.postLoading }">
                                <div class="edit-history-div" *ngIf="post.isEdited=='1'">
                                    <div class="table-row2">
                                        <div class="problem-row setPaddingTop1">
                                            <div class="problem-col-lt thread-history-date">
                                                <img src='assets/images/thread-detail/thread-history-date.svg' alt='' onload='SVGInject(this)' />
                                            </div>
                                            <div class="problem-col-rt w86">
                                                <p class="edit-text1">Edited On</p>
                                                <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].updatedOnNew}}</p>      
                                            </div> 
                                        </div>
                                        <div class="problem-row setPaddingTop2">
                                            <div class="problem-col-lt thread-history-edituser"><span class="thread-history-edituser-img rounded-circle" [ngStyle]="{'background-image': 'url(' + post.editHistory[post.editHistory.length-1].profileImage + ')'}"></span></div>
                                            <div class="problem-col-rt w86">
                                                <p class="edit-text1">Edited By</p>
                                                <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].userName}}</p>      
                                            </div> 
                                        </div>
                                    </div>  
                                </div>
                            </div>
                        </div>                    
                    
                        <!-- empty div start----- Loading div  --->
                        <div class="post-div">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view" *ngIf="postLoading">
                                    <div class="post-view-paddBottom">
                                        <div class="post-loader">
                                            <div class="post-loader-svg"></div>
                                        </div>
                                    </div>                                
                                </div>
                                <div class="post-view" *ngIf="!postLoading" [ngClass]="{'post-view-last': postDataLength>0 && closeStatus==1, 'hide': postDataLength==0 && closeStatus==1}">                                
                                    <div *ngIf="postError" class="th-error-div"><div class="error-msg">{{postErrorMsg}}</div></div> 
                                </div>                   
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>
                        <!-- empty div end----- Loading div  --->  
                        <div class="post-div" *ngIf="!newPostLoad && closeStatus==0">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-new">
                                   
                                        <div class="thread-head post-head display-table">
                                            <div class="display-tablecell thread-head-col1 post-head-col1">
                                                <div class="display-table">
                                                    <div class="display-tablecell">
                                                        <div class="th-head-img"><span class="rounded-circle cursor-pointer" (click)="taponprofileclick(userId)" [ngStyle]="{'background-image': 'url(' + loginUserProfileImg + ')'}"></span><span class="availability-status availability-status{{loginUserAvailability}}"></span></div>                            
                                                    </div>
                                                    <div class="display-tablecell">
                                                        <span class="th-head-text1 cursor-pointer" (click)="taponprofileclick(userId)">{{loginUsername}}</span>
                                                        <span class="th-head-text2 new-head-text2">{{loginUserRole}}</span>                                                    
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="display-tablecell post-head-col2">
                                                <div *ngIf="(techSubmmitFlag || closeAccess) && !continueButtonEnable" class="post-button post-button-black setOpacity3">
                                                    <span class="post-btn-text">Close {{headerTitle}}</span>
                                                    <span class="new-close-img"><img class="post-btn-img" src="assets/images/thread-detail/thread-close-white.png"></span>
                                                </div>
                                                <div *ngIf="(techSubmmitFlag || closeAccess) && continueButtonEnable" class="post-button post-button-black cursor-pointer" (click)="closeThreadConfirm()">
                                                    <span   class="post-btn-text {{escalationStatusViewClass}}">Close {{headerTitle}}</span>
                                                    <span class="new-close-img"><img class="post-btn-img" src="assets/images/thread-detail/thread-close-white.png"></span>                                                
                                                </div>
                                                <div *ngIf="!postButtonEnable"  class="post-button post-button-red setOpacity3">
                                                    <span class="post-btn-text">Post</span>
                                                    <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                                </div>
                                                <div *ngIf="postButtonEnable && !techSubmmitFlag && !msTeamAccessMobile" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSubmitContent">
                                                    <span class="post-btn-text">Post</span>
                                                    <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>                                              
                                                </div>
                                                <div *ngIf="postButtonEnable && techSubmmitFlag" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment', '0',0,'new')">
                                                    <span class="post-btn-text">Post</span>
                                                    <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                                </div>
                                                <div *ngIf="postButtonEnable && !techSubmmitFlag && msTeamAccessMobile" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSubmitContent">
                                                    <span class="post-btn-text">Post</span>
                                                    <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                                </div>
                                                <ng-template #postSubmitContent>
                                                    <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                        <label class="label-tt-head">Select your Post type</label>
                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',0,'new')">
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-comment.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply or Comment</span>
                                                        </div>
                                                        <div *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',0,'new')" >
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                        </div> 
                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',0,'new')"  >
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                        </div>
                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '2',0,'new')" >
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/possible-fix.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                        </div>                                                       
                                                    </div>
                                                    <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                        <label class="label-tt-head">Are you posting a Comment or a Proposed Fix?</label>
                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',0,'new')" >
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-comment.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                        </div>
                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',0,'new')" >
                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/proposed-fix.png"></span>
                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                        </div>                                                   
                                                    </div>
                                                </ng-template>
                                            </div>                                        
                                        </div>
                                        <div class="post-new-cont">                                            
                                            <!--<div class="post-error-msg" *ngIf="submitted && f.postDesc.errors">Enter Reply</div>-->
                                            <div class="post-desp-div">
                                                <!--textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postDesc" [ngModel]="postDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'new')"></textarea>-->
                                                <p-editor [(ngModel)]="postDesc" (onTextChange)="changePostDesc($event,'new')" [style]="{'height': '180px'}">
                                                    <p-header>
                                                        <span class="ql-formats">
                                                            <button class="ql-bold" aria-label="Bold"></button>
                                                            <button class="ql-italic" aria-label="Italic"></button>
                                                            <button class="ql-underline" aria-label="Underline"></button>
                                                        
                                                            <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                            <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                            </select>
                                                            <button class="ql-list" value="ordered"></button>
                                                            <button class="ql-list" value="bullet"></button>
                                                            <select title="Text Alignment" class="ql-align" >
                                                                <option selected>Gauche</option>
                                                                <option value="center" label="Center"></option>
                                                                <option value="right" label="Right"></option>
                                                                <option value="justify" label="Justify"></option>
                                                            </select>            
                                                        
                                                            <!--<button aria-label="Link" class="ql-link"></button>-->
                                                            <!--button aria-label="Image" class="ql-image"></button-->
                                                        </span>
                                                    </p-header>
                                                </p-editor>
                                            </div>
                                           <div class="clear">
                                           </div>
                                           <div *ngIf="domainId==52 && closeStatus!=1">
                                            <br/>
                                            <div class="tag-users cursor" (click)="tapontagUsers()">
                                                <div>
                                                    <div class="drop-col split-col">
                                                        <span class="split-icon "></span>
                                                    </div>
                                                <p-dropdown [disabled]="true"  placeholder="Tag Users"   class="input-with-icon-inside-select mat-typography" appendTo="body"  ></p-dropdown>
                                                </div>
                                            </div>
                                            <div class="tag-users-list cursor">
                                                <div *ngIf="assignedUsersList && assignedUsersPopupResponse" class="selected-users selected-users-bg" [ngClass]="{'hide': assignedUsersList.length < 1}">
                                                    <ul style="max-height: 75px;" class="overflow-auto p-0">
                                                        <li *ngFor="let u of assignedUsersList; let i = index;" class="p-0 mt-3">
                                                            <span class="img" [ngStyle]="{'background-image': 'url(' +u.img+ ')'}">
                                                                <span class="cursor remove" (click)="removeE1scSelection(u.id)"></span>
                                                            </span>
                                                            <span class="name text-left ml-4" title="{{u.name}}">{{u.name}}</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                                </div>
                                                <br/>
                                                
                                        </div>
                                            <div class="attachment-row">
                                                <div class="post-error-msg post-link-error" *ngIf="postServerError">{{postServerErrorMsg}}</div>
                                                <app-file-attachment *ngIf="postUpload" class="attachment-file" [action]="manageAction" [apiData]="postApiData" (uploadedItems)="attachments($event)"></app-file-attachment>
                                            </div>
                                            
                                        </div>                                     
                                </div>
                            </div>
                            <div class="post-div-col post-div-right new-post-scroll-hide">&nbsp;</div>
                        </div>                         
                        <div class="post-div" *ngIf="!newPostLoad && closeStatus==1">
                            <div class="post-div-col post-div-left"> 
                                <div class="close-div" >
                                    <img class="close-div-icon" src="assets/images/thread-detail/thread-closed-white.png">
                                    <span class="close-div-text">{{headerTitle}} Closed on {{closedDate}}</span>
                                </div>
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div> 
                    </div>      
                  </div>
            </div> 
        </div>
        
        <div *ngIf="!msTeamAccess" class="th-outer-col th-outer-col-3" [ngClass]="{'col-expand': rightPanel, 'col-collapse': !rightPanel}">
            <div class="cust-right-panel" [ngClass]="{'right-panel-expand': rightPanel, 'right-panel-collapse': !rightPanel}">
                <app-domain-members></app-domain-members>
            </div>
        </div>             
        
    </div>
        
</div>
</div>

<p-dialog header="Select your feedback" [modal]="true" [draggable]="false" [resizable]="false"  [(visible)]="visibledealerClosePopup" styleClass="p-fluid feedbackoptionssupport">
  <div style="width: 100%;">
    <div *ngFor="let feedbackList of supportFeedbackList;" class="feedback-status-main-content" >
        
            <div [style.background-color]="feedbackList.bgColor" class="inner-feedback-content cursor feedback-id{{feedbackList.id}}" (click)="feedbackSubmit(feedbackList.id)">
                <div class="feedback-status-name" style=" color: #fff;font-size: 14px;padding-top: 10px;">
                    <div class="text-center text-content-feedback-img"><img src="assets/images/thread/{{feedbackList.imgClass}}"></div>
                    <div class="text-center text-content-feedback-name">
                    {{feedbackList.name}}
                </div>    
                </div>
            </div>
           
        
        </div>
        </div>
</p-dialog>